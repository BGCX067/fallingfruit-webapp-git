<%= form_for(@location) do |f| %>
  <% if @location.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@location.errors.count, "error") %> prohibited this location from being saved:</h2>

      <ul>
      <% @location.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  <div class="field">
    *<%= f.label :title %><br />
    <span class="subtext">A short description of what it is, e.g., "Big old apple tree"</span><br>
    <%= f.text_field :title %>
  </div>
  <div class="field">
    *<%= f.label :author %><br />
    <span class="subtext">That's your name, pseudonym, or "Anonymous" if you prefer</span><br>
    <%= f.text_field :author %>
    <span>
  </div>
  <div class="field">
    <%= f.label :region %><br />
    <%= f.select(:region_id,Region.all.collect{ |r| [r.name,r.id] },:include_blank => true) %>
  </div>
  <div class="field">
    <%= f.label :type %><br />
    <span class="subtext">What'd you find?</span><br>
    <%= f.select(:type_id,Type.all.collect{ |t| [t.name,t.id] },:include_blank => true) %>, or
    <%= f.text_field :type_other %>
  </div>
  <div class="field">
    *<%= f.label :address %><br />
    <span class="subtext">Address is automagically geocoded by the google hiveborg.<br>The lat/lon are determined based on your current location (when possible), or a marker you placed.<br>The address will <em>overwrite</em> this lat/lon, so don't provide one if you want to use the lat/lon.</span><br>
    <table><tr><td><%= f.text_area :address, :size => "20x3" %>
               <td>or<td>lon:<%= f.text_field :lng, :size => 10, :value => @lng %>, 
                         lat:<%= f.text_field :lat, :size => 10, :value => @lng %></table>
    <span class="subtext">Lat/lon are assumed to be in the WGS84 (SRID 4326) projection :)</span>
  </div>
  <div class="field">
    <%= f.label :description_and_notes %><br />
    <span class="subtext">Any access issues? Problems? Things to note?</span><br>
    <%= f.text_area :description, :size => "30x10" %>
  </div>
  <div class="field">
    <%= f.label :season %><br />
    <span class="subtext">When is it fruiting (approximately), leave blank if you don't know</span><br>
    <%= f.select(:season_start,Location::Months.collect{ |m| [m,Location::Months.index(m)] },:include_blank => true) %> to 
    <%= f.select(:season_stop,Location::Months.collect{ |m| [m,Location::Months.index(m)] },:include_blank => true) %>, or
    <%= f.check_box(:no_season) %> No Season
  </div>
  <div class="field">
    <%= f.check_box(:inaccessible) %> Inaccessible<br>
    <span class="subtext">Check here if it is not, or is no longer accessible :(</span>
  </div>
  <div class="field">
    <%= f.check_box(:unverified) %> Unverified<br>
    <span class="subtext">Check here if you haven't actually seen/verified this source.</span>
  </div>
  <div class="field">
    <%= f.label :rating %><br />
    <span class="subtext">Rate the tastiness and productivity of this source.</span><br>
    <%= f.select(:rating,Location::Ratings.collect{ |r| [r,Location::Ratings.index(r)] },:include_blank => true) %>
  </div>

  <br>
  <%= recaptcha_tags if current_admin.nil? %>
  <br>
  <div class="actions">
    <%= f.submit %>
    <%= check_box_tag(:create_another, '1', :checked => true) %> Create Another<br>
  </div>
<% end %>
